#!/bin/bash

main() {
  echo "-- = = ===== Install Ubuntu 20.04.6 Script from LDworks ===== = = --"

  echo "-- upgrade: OS..."
  sudo apt update
  sudo apt upgrade
  sudo apt-get install -y build-essential mc nano htop curl net-tools
  sudo apt-get install -y ufw fail2ban openssh-server
  sudo apt-get install -y gparted
  sudo apt-get install -y gnome-tweaks
  curl -fsSL https://get.docker.com | /bin/sh
  sudo adduser $USER docker
  sudo apt autoremove
  doPause

  echo "-- setup: ufw..."
  sudo ufw enable
  sudo ufw default deny incoming
  sudo ufw default allow outgoing
  sudo ufw allow ssh
  sudo ufw allow http
  sudo ufw allow https
  sudo ufw reload
  doPause

  echo "-- setup: fail2ban..."
  sudo systemctl start fail2ban
  sudo systemctl enable fail2ban
  sudo touch "/etc/fail2ban/jail.local"
  sudo chmod 777 "/etc/fail2ban/jail.local"
  echo "[sshd]">"/etc/fail2ban/jail.local"
  echo "enabled = true">>"/etc/fail2ban/jail.local"
  echo "port = 22">>"/etc/fail2ban/jail.local"
  echo "filter = sshd">>"/etc/fail2ban/jail.local"
  echo "logpath = /var/log/auth.log">>"/etc/fail2ban/jail.local"
  echo "maxretry = 3">>"/etc/fail2ban/jail.local"
  sudo chmod 644 "/etc/fail2ban/jail.local"
  sudo systemctl restart fail2ban
  doPause

  echo "-- install: GuestAdditions..."
  doPause

  echo "-- install: ms-edge..."
  doPause

  echo "-- install: google-chrome..."
  doPause

  echo "-- install: chromium..."
  doPause

  echo "-- install: firefox..."
  doPause

  echo "-- note:"
  echo "-- - gnome.terminal.size=135x35"
  echo "-- - gnome.animations=false"
  doPause
}

doPause() {
  read -p "-- pause: Press any key to continue..."
}

main
